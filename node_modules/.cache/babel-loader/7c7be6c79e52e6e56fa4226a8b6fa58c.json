{"ast":null,"code":"import _classCallCheck from\"E:\\\\Thulasy\\\\project_live_workspace\\\\Myntinvest\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\Thulasy\\\\project_live_workspace\\\\Myntinvest\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"E:\\\\Thulasy\\\\project_live_workspace\\\\Myntinvest\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _createSuper from\"E:\\\\Thulasy\\\\project_live_workspace\\\\Myntinvest\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _inherits from\"E:\\\\Thulasy\\\\project_live_workspace\\\\Myntinvest\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import Button from'../elements/Button';import Image from\"../elements/Image\";import'../Css/styles.css';import{Editor}from\"react-draft-wysiwyg\";import\"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";import ButtonGroup from\"../elements/ButtonGroup\";import{NavLink,Link}from\"react-router-dom\";import DataService from'../../service/DataService';import UploadService from\"../../service/file-upload.service\";import Moment from'moment';import $ from\"jquery\";var current=new Date();var date=\"\".concat(current.getFullYear(),\"-\").concat(current.getMonth()+1,\"-\").concat(current.getDate());//mysql insert date format\nvar formatDate=Moment(\"12/09/2002\").format('YYYY-MM-DD');//2002-12-09\nvar extractFilename=function extractFilename(path){var pathArray=path.split(\"/\");var lastIndex=pathArray.length-1;return pathArray[lastIndex];};var Campaign_Banner=/*#__PURE__*/function(_React$Component){_inherits(Campaign_Banner,_React$Component);var _super=_createSuper(Campaign_Banner);function Campaign_Banner(){var _this;_classCallCheck(this,Campaign_Banner);_this=_super.call(this);_this.state={cambanAllDets:[],currentcampban:null,currentcampbanIndex:-1,input:{},errors:{},ID:null,MTUSER_ID:null,EMAIL:null,MODULE:null,CAM_BAN_IMAGE:\"\",CAM_BAN_VIDEO:\"\",STATUS:\"\",COMMENTS:\"\",DESCRIPTION:\"\",CREATED_USER:\"\",CREATED_DATE:\"\",MODIFIED_USER:\"\",MODIFIED_DATE:\"\"};_this.saveCamBan=_this.saveCamBan.bind(_assertThisInitialized(_this));_this.retrieveAllCamBan=_this.retrieveAllCamBan.bind(_assertThisInitialized(_this));_this.setActiveCamBan=_this.setActiveCamBan.bind(_assertThisInitialized(_this));return _this;}_createClass(Campaign_Banner,[{key:\"componentDidMount\",value:function componentDidMount(){this.retrieveAllCamBan();}},{key:\"retrieveAllCamBan\",value:function retrieveAllCamBan(){var _this2=this;var querySet=\"/campban?EMAIL=\"+sessionStorage.getItem(\"sessEmail\");console.log(querySet);DataService.findByTitle(querySet).then(function(response){_this2.setState({cambanAllDets:response.data});$.each(_this2.state.cambanAllDets,function(index,value){$(\"#CampBanform #campbanid\").attr(\"value\",value.ID).val(value.ID);$(\"#CampBanform #campbanimage\").closest(\".imgUp\").find('.imagePreview').css(\"background-image\",\"url(\"+window.mt_backend_url+value.CAM_BAN_IMAGE+\")\");$(\"#CampBanform #campbanimage\").closest(\"label\").css(\"visibility\",\"hidden\");if(value.CAM_BAN_VIDEO.length>0){$(\"#CampBanform #campbanvideo\").closest(\"div\").html(\"<p>Download file: <a class='text-primary' target='_blank' href=\"+window.mt_backend_url+value.CAM_BAN_VIDEO+\">\"+extractFilename(value.CAM_BAN_VIDEO)+\"</a></p>\");}else{$(\"#CampBanform #campbanvideo\").closest(\"div\").html('<input type=\"file\" id=\"campbanvideo\" name=\"campbanvideo\" className=\"form-control\"  multiple />');}});}).catch(function(e){console.log(e);});}},{key:\"setActiveCamBan\",value:function setActiveCamBan(cambanAllDets,index){this.setState({currentcampban:cambanAllDets,currentcampbanIndex:index// tfcurrentFile:this.state.tfcurrentFile\n});}},{key:\"saveCamBan\",value:function saveCamBan(event){event.preventDefault();if(this.validateCampBan()){if(!window.isEmpty(sessionStorage.getItem(\"sessEmail\"))){var cambanformData=new FormData();cambanformData.append(\"ID\",Number($(\"#CampBanform #campbanid\").val()));cambanformData.append(\"MTUSER_ID\",$(\"#mtuser_id\").val());cambanformData.append(\"EMAIL\",$(\"#mtuser_email\").val());cambanformData.append(\"MODULE\",$(\"#mtuser_module\").val());cambanformData.append(\"STATUS\",\"Active\");cambanformData.append(\"COMMENTS\",\"TEST\");cambanformData.append(\"DESCRIPTION\",\"TEST\");cambanformData.append(\"CREATED_USER\",$(\"#mtuser_fname\").val());cambanformData.append(\"CREATED_DATE\",Moment(date).format(\"YYYY-MM-DD\"));cambanformData.append(\"MODIFIED_USER\",$(\"#mtuser_fname\").val());cambanformData.append(\"MODIFIED_DATE\",Moment(date).format(\"YYYY-MM-DD\"));if(window.isEmpty($(\"#CampBanform #campbanid\").val())){cambanformData.append(\"CAM_BAN_IMAGE\",$(\"#CampBanform #campbanimage\")[0].files[0],$(\"#CampBanform #campbanimage\")[0].files[0].name);cambanformData.append(\"CAM_BAN_VIDEO\",$(\"#CampBanform #campbanvideo\")[0].files[0],$(\"#CampBanform #campbanvideo\")[0].files[0].name);}// console.log(rsformData);\nif(window.isEmpty($(\"#CampBanform #campbanid\").val())){UploadService.create(\"/campban\",cambanformData).then(function(response){console.log(\"inside\");window.showLoader();window.showAlert(\"The Campaign is submittted\",\"/Campaign_Banner\");}).catch(function(e){window.showLoader();window.showAlert(\"OOps!!! Something went wrong\",\"/Campaign_Banner\");});}else{UploadService.update(\"/campban/\"+Number($(\"#CampBanform #campbanid\").val()),cambanformData).then(function(response){window.showLoader();window.showAlert(\"The Campaign is submittted\",\"/Campaign_Banner\");}).catch(function(e){window.showLoader();window.showAlert(\"OOps!!! Something went wrong\",\"/Campaign_Banner\");});}// });\n}else{window.showAlert(\"Please Login\",\"/Login\");}}}},{key:\"validateCampBan\",value:function validateCampBan(){console.log(\"inside validateCampBan validations\");var input=this.state.input;var errors={};var isValid=true;if(window.isEmpty($(\"#CampBanform #campbanid\").val())){if(!$(\"#CampBanform #campbanimage\").get(0).files.length>0){isValid=false;errors[\"campbanimage\"]=\"Please Upload Image\";$(\"#CampBanform #campbanimage\").focus();}if(!$(\"#CampBanform #campbanvideo\").get(0).files.length>0){isValid=false;errors[\"campbanvideo\"]=\"Please Upload Video\";$(\"#CampBanform #campbanvideo\").focus();}}this.setState({errors:errors});return isValid;}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"body\",{className:\"\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\",style:{height:'auto',marginTop:100}},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"hero-content\"},/*#__PURE__*/React.createElement(\"nav\",{className:\"navbar navbar-expand-sm bg-Secondary navbar-white \"},/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"navbar-nav\",style:{fontSize:13}},/*#__PURE__*/React.createElement(\"li\",{className:\"nav-item\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/Campaign\",className:\"nav-link arrow-right\",style:{color:\"#B1B0AD\"}},\"\\xA0Back to Campaign\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"container bg-white p-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Banner Video\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\",style:{height:'auto'}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"form\",{name:\"CampBanform\",id:\"CampBanform\",method:\"POST\",enctype:\"multipart/form-data\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12\"},/*#__PURE__*/React.createElement(\"input\",{type:\"hidden\",id:\"campbanid\",name:\"campbanid\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 mb-3 mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8\"},/*#__PURE__*/React.createElement(\"label\",{for:\"campbanimage\",className:\"form-label\"},\"Banner Photo\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 imgUp\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-md-12 btn btn-outline-secondary btn-sm\"},\"Upload a picture\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"campbanimage\",name:\"campbanimage\",accept:\"image/*\",multiple:true,style:{height:\"0px\",width:\"0px\",overflow:\"hidden\"}})),/*#__PURE__*/React.createElement(\"div\",{className:\"text-danger errors\",style:{fontSize:15}},this.state.errors.campbanimage),/*#__PURE__*/React.createElement(\"div\",{className:\"imagePreview\"},\" \")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 mb-3 mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row mb-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-sm-2 form-label\"},\"Video(s)\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"campbanvideo\",name:\"campbanvideo\",className:\"form-control\",multiple:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"text-danger errors\",style:{fontSize:15}},this.state.errors.campbanvideo))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-12 mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-success btn-sm  w-100\",onClick:this.saveCamBan},\"Submit\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 mb-3\"},\"\\xA0\"))))))))))));}}]);return Campaign_Banner;}(React.Component);;export default Campaign_Banner;","map":{"version":3,"sources":["E:/Thulasy/project_live_workspace/Myntinvest/src/components/sections/Campaign_Banner.js"],"names":["React","Component","Button","Image","Editor","ButtonGroup","NavLink","Link","DataService","UploadService","Moment","$","current","Date","date","getFullYear","getMonth","getDate","formatDate","format","extractFilename","path","pathArray","split","lastIndex","length","Campaign_Banner","state","cambanAllDets","currentcampban","currentcampbanIndex","input","errors","ID","MTUSER_ID","EMAIL","MODULE","CAM_BAN_IMAGE","CAM_BAN_VIDEO","STATUS","COMMENTS","DESCRIPTION","CREATED_USER","CREATED_DATE","MODIFIED_USER","MODIFIED_DATE","saveCamBan","bind","retrieveAllCamBan","setActiveCamBan","querySet","sessionStorage","getItem","console","log","findByTitle","then","response","setState","data","each","index","value","attr","val","closest","find","css","window","mt_backend_url","html","catch","e","event","preventDefault","validateCampBan","isEmpty","cambanformData","FormData","append","Number","files","name","create","showLoader","showAlert","update","isValid","get","focus","height","marginTop","fontSize","color","width","overflow","campbanimage","campbanvideo"],"mappings":"u1BAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,mBAAlB,CACA,MAAO,mBAAP,CACA,OAASC,MAAT,KAAuB,qBAAvB,CACA,MAAO,kDAAP,CACA,MAAOC,CAAAA,WAAP,KAAwB,yBAAxB,CACA,OAAQC,OAAR,CAAgBC,IAAhB,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,2BAAxB,CACA,MAAOC,CAAAA,aAAP,KAA0B,mCAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,QAAnB,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,GAAMC,CAAAA,OAAO,CAAG,GAAIC,CAAAA,IAAJ,EAAhB,CACA,GAAMC,CAAAA,IAAI,WAAMF,OAAO,CAACG,WAAR,EAAN,aAA+BH,OAAO,CAACI,QAAR,GAAmB,CAAlD,aAAuDJ,OAAO,CAACK,OAAR,EAAvD,CAAV,CAAqF;AACrF,GAAMC,CAAAA,UAAU,CAAGR,MAAM,CAAC,YAAD,CAAN,CAAqBS,MAArB,CAA4B,YAA5B,CAAnB,CAA4D;AAK5D,GAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,IAAD,CAAU,CAChC,GAAMC,CAAAA,SAAS,CAAGD,IAAI,CAACE,KAAL,CAAW,GAAX,CAAlB,CACA,GAAMC,CAAAA,SAAS,CAAGF,SAAS,CAACG,MAAV,CAAmB,CAArC,CACA,MAAOH,CAAAA,SAAS,CAACE,SAAD,CAAhB,CACD,CAJD,C,GAKME,CAAAA,e,8HACF,0BAAc,iDACd,wBACA,MAAKC,KAAL,CAAa,CACXC,aAAa,CAAE,EADJ,CAEXC,cAAc,CAAE,IAFL,CAGXC,mBAAmB,CAAE,CAAC,CAHX,CAIXC,KAAK,CAAE,EAJI,CAKXC,MAAM,CAAE,EALG,CAMXC,EAAE,CAAC,IANQ,CAOXC,SAAS,CAAC,IAPC,CAQXC,KAAK,CAAC,IARK,CASXC,MAAM,CAAC,IATI,CAUXC,aAAa,CAAC,EAVH,CAWXC,aAAa,CAAC,EAXH,CAYXC,MAAM,CAAC,EAZI,CAaXC,QAAQ,CAAC,EAbE,CAcXC,WAAW,CAAC,EAdD,CAeXC,YAAY,CAAC,EAfF,CAgBXC,YAAY,CAAC,EAhBF,CAiBXC,aAAa,CAAC,EAjBH,CAkBXC,aAAa,CAAC,EAlBH,CAAb,CAqBA,MAAKC,UAAL,CAAkB,MAAKA,UAAL,CAAgBC,IAAhB,+BAAlB,CACA,MAAKC,iBAAL,CAAyB,MAAKA,iBAAL,CAAuBD,IAAvB,+BAAzB,CACA,MAAKE,eAAL,CAAuB,MAAKA,eAAL,CAAqBF,IAArB,+BAAvB,CAzBc,aA0Bf,C,yFAImB,CAClB,KAAKC,iBAAL,GACD,C,6DAGmB,iBAClB,GAAIE,CAAAA,QAAQ,CAAG,kBAAoBC,cAAc,CAACC,OAAf,CAAuB,WAAvB,CAAnC,CACAC,OAAO,CAACC,GAAR,CAAYJ,QAAZ,EACA1C,WAAW,CAAC+C,WAAZ,CAAwBL,QAAxB,EACGM,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChB,MAAI,CAACC,QAAL,CAAc,CACZ9B,aAAa,CAAE6B,QAAQ,CAACE,IADZ,CAAd,EAIChD,CAAC,CAACiD,IAAF,CAAO,MAAI,CAACjC,KAAL,CAAWC,aAAlB,CAAiC,SAAUiC,KAAV,CAAiBC,KAAjB,CAAwB,CAG1DnD,CAAC,CAAC,yBAAD,CAAD,CAA6BoD,IAA7B,CAAkC,OAAlC,CAA2CD,KAAK,CAAC7B,EAAjD,EAAqD+B,GAArD,CAAyDF,KAAK,CAAC7B,EAA/D,EACGtB,CAAC,CAAC,4BAAD,CAAD,CAAgCsD,OAAhC,CAAwC,QAAxC,EAAkDC,IAAlD,CAAuD,eAAvD,EAAwEC,GAAxE,CAA4E,kBAA5E,CAAgG,OAAOC,MAAM,CAACC,cAAd,CAA6BP,KAAK,CAACzB,aAAnC,CAAiD,GAAjJ,EACH1B,CAAC,CAAC,4BAAD,CAAD,CAAgCsD,OAAhC,CAAwC,OAAxC,EAAiDE,GAAjD,CAAqD,YAArD,CAAkE,QAAlE,EACE,GAAGL,KAAK,CAACxB,aAAN,CAAoBb,MAApB,CAA6B,CAAhC,CAAkC,CAClCd,CAAC,CAAC,4BAAD,CAAD,CAAgCsD,OAAhC,CAAwC,KAAxC,EAA+CK,IAA/C,CAAoD,kEAAkEF,MAAM,CAACC,cAAzE,CAAwFP,KAAK,CAACxB,aAA9F,CAA4G,GAA5G,CAAgHlB,eAAe,CAAC0C,KAAK,CAACxB,aAAP,CAA/H,CAAqJ,UAAzM,EACD,CAFC,IAEG,CACH3B,CAAC,CAAC,4BAAD,CAAD,CAAgCsD,OAAhC,CAAwC,KAAxC,EAA+CK,IAA/C,CAAoD,gGAApD,EACD,CAEL,CAZK,EAcF,CApBH,EAqBGC,KArBH,CAqBS,SAAAC,CAAC,CAAI,CACVnB,OAAO,CAACC,GAAR,CAAYkB,CAAZ,EACD,CAvBH,EAwBD,C,wDAGe5C,a,CAAeiC,K,CAAO,CACpC,KAAKH,QAAL,CAAc,CACZ7B,cAAc,CAAED,aADJ,CAEZE,mBAAmB,CAAE+B,KACrB;AAHY,CAAd,EAKD,C,8CAGUY,K,CAAO,CAChBA,KAAK,CAACC,cAAN,GACA,GAAI,KAAKC,eAAL,EAAJ,CAA4B,CAC1B,GAAI,CAACP,MAAM,CAACQ,OAAP,CAAezB,cAAc,CAACC,OAAf,CAAuB,WAAvB,CAAf,CAAL,CAA0D,CAExD,GAAIyB,CAAAA,cAAc,CAAG,GAAIC,CAAAA,QAAJ,EAArB,CACAD,cAAc,CAACE,MAAf,CAAsB,IAAtB,CAA2BC,MAAM,CAACrE,CAAC,CAAC,yBAAD,CAAD,CAA6BqD,GAA7B,EAAD,CAAjC,EACAa,cAAc,CAACE,MAAf,CAAsB,WAAtB,CAAkCpE,CAAC,CAAC,YAAD,CAAD,CAAgBqD,GAAhB,EAAlC,EACAa,cAAc,CAACE,MAAf,CAAsB,OAAtB,CAA8BpE,CAAC,CAAC,eAAD,CAAD,CAAmBqD,GAAnB,EAA9B,EACAa,cAAc,CAACE,MAAf,CAAsB,QAAtB,CAA+BpE,CAAC,CAAC,gBAAD,CAAD,CAAoBqD,GAApB,EAA/B,EACAa,cAAc,CAACE,MAAf,CAAsB,QAAtB,CAA+B,QAA/B,EACAF,cAAc,CAACE,MAAf,CAAsB,UAAtB,CAAkC,MAAlC,EACAF,cAAc,CAACE,MAAf,CAAsB,aAAtB,CAAqC,MAArC,EACAF,cAAc,CAACE,MAAf,CAAsB,cAAtB,CAAsCpE,CAAC,CAAC,eAAD,CAAD,CAAmBqD,GAAnB,EAAtC,EACAa,cAAc,CAACE,MAAf,CAAsB,cAAtB,CAAsCrE,MAAM,CAACI,IAAD,CAAN,CAAaK,MAAb,CAAoB,YAApB,CAAtC,EACA0D,cAAc,CAACE,MAAf,CAAsB,eAAtB,CAAuCpE,CAAC,CAAC,eAAD,CAAD,CAAmBqD,GAAnB,EAAvC,EACAa,cAAc,CAACE,MAAf,CAAsB,eAAtB,CAAuCrE,MAAM,CAACI,IAAD,CAAN,CAAaK,MAAb,CAAoB,YAApB,CAAvC,EAGA,GAAIiD,MAAM,CAACQ,OAAP,CAAejE,CAAC,CAAC,yBAAD,CAAD,CAA6BqD,GAA7B,EAAf,CAAJ,CAAwD,CACtDa,cAAc,CAACE,MAAf,CAAsB,eAAtB,CAAuCpE,CAAC,CAAC,4BAAD,CAAD,CAAgC,CAAhC,EAAmCsE,KAAnC,CAAyC,CAAzC,CAAvC,CAAmFtE,CAAC,CAAC,4BAAD,CAAD,CAAgC,CAAhC,EAAmCsE,KAAnC,CAAyC,CAAzC,EAA4CC,IAA/H,EACAL,cAAc,CAACE,MAAf,CAAsB,eAAtB,CAAuCpE,CAAC,CAAC,4BAAD,CAAD,CAAgC,CAAhC,EAAmCsE,KAAnC,CAAyC,CAAzC,CAAvC,CAAmFtE,CAAC,CAAC,4BAAD,CAAD,CAAgC,CAAhC,EAAmCsE,KAAnC,CAAyC,CAAzC,EAA4CC,IAA/H,EAED,CAED;AAEA,GAAId,MAAM,CAACQ,OAAP,CAAejE,CAAC,CAAC,yBAAD,CAAD,CAA6BqD,GAA7B,EAAf,CAAJ,CAAwD,CAEtDvD,aAAa,CAAC0E,MAAd,CAAqB,UAArB,CAAiCN,cAAjC,EACGrB,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChBJ,OAAO,CAACC,GAAR,CAAY,QAAZ,EACAc,MAAM,CAACgB,UAAP,GACAhB,MAAM,CAACiB,SAAP,CAAiB,4BAAjB,CAA+C,kBAA/C,EACD,CALH,EAMGd,KANH,CAMS,SAAAC,CAAC,CAAI,CACVJ,MAAM,CAACgB,UAAP,GACAhB,MAAM,CAACiB,SAAP,CAAiB,8BAAjB,CAAiD,kBAAjD,EACD,CATH,EAWD,CAbD,IAaO,CAGL5E,aAAa,CAAC6E,MAAd,CAAqB,YAAcN,MAAM,CAACrE,CAAC,CAAC,yBAAD,CAAD,CAA6BqD,GAA7B,EAAD,CAAzC,CAA+Ea,cAA/E,EACGrB,IADH,CACQ,SAAAC,QAAQ,CAAI,CAChBW,MAAM,CAACgB,UAAP,GACAhB,MAAM,CAACiB,SAAP,CAAiB,4BAAjB,CAA+C,kBAA/C,EACD,CAJH,EAKGd,KALH,CAKS,SAAAC,CAAC,CAAI,CACVJ,MAAM,CAACgB,UAAP,GACAhB,MAAM,CAACiB,SAAP,CAAiB,8BAAjB,CAAiD,kBAAjD,EACD,CARH,EAUD,CAGD;AAID,CAzDD,IAyDO,CACLjB,MAAM,CAACiB,SAAP,CAAiB,cAAjB,CAAiC,QAAjC,EACD,CACF,CAEF,C,yDAIgB,CACfhC,OAAO,CAACC,GAAR,CAAY,oCAAZ,EACA,GAAIvB,CAAAA,KAAK,CAAG,KAAKJ,KAAL,CAAWI,KAAvB,CACA,GAAIC,CAAAA,MAAM,CAAG,EAAb,CACA,GAAIuD,CAAAA,OAAO,CAAG,IAAd,CAEA,GAAInB,MAAM,CAACQ,OAAP,CAAejE,CAAC,CAAC,yBAAD,CAAD,CAA6BqD,GAA7B,EAAf,CAAJ,CAAwD,CACxD,GAAI,CAACrD,CAAC,CAAC,4BAAD,CAAD,CAAgC6E,GAAhC,CAAoC,CAApC,EAAuCP,KAAvC,CAA6CxD,MAA9C,CAAwD,CAA5D,CAA+D,CAC7D8D,OAAO,CAAG,KAAV,CACAvD,MAAM,CAAC,cAAD,CAAN,CAAyB,qBAAzB,CACArB,CAAC,CAAC,4BAAD,CAAD,CAAgC8E,KAAhC,GACD,CAED,GAAI,CAAC9E,CAAC,CAAC,4BAAD,CAAD,CAAgC6E,GAAhC,CAAoC,CAApC,EAAuCP,KAAvC,CAA6CxD,MAA9C,CAAwD,CAA5D,CAA+D,CAC7D8D,OAAO,CAAG,KAAV,CACAvD,MAAM,CAAC,cAAD,CAAN,CAAyB,qBAAzB,CACArB,CAAC,CAAC,4BAAD,CAAD,CAAgC8E,KAAhC,GACD,CACF,CAIC,KAAK/B,QAAL,CAAc,CACZ1B,MAAM,CAAEA,MADI,CAAd,EAIA,MAAOuD,CAAAA,OAAP,CACD,C,uCAEO,CAIV,mBAEE,4BAAM,SAAS,CAAC,EAAhB,eACA,2BAAK,SAAS,CAAC,WAAf,eACI,2BAAK,SAAS,CAAC,KAAf,CAAqB,KAAK,CAAE,CAACG,MAAM,CAAC,MAAR,CAAeC,SAAS,CAAC,GAAzB,CAA5B,eACI,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,cAAf,eACG,2BAAK,SAAS,CAAC,oDAAf,eACG,2BAAK,SAAS,CAAC,iBAAf,eACM,0BAAI,SAAS,CAAC,YAAd,CAA2B,KAAK,CAAE,CAACC,QAAQ,CAAC,EAAV,CAAlC,eACI,0BAAI,SAAS,CAAC,UAAd,eACI,oBAAC,OAAD,EAAS,EAAE,CAAC,WAAZ,CAAwB,SAAS,CAAC,sBAAlC,CAAyD,KAAK,CAAE,CAACC,KAAK,CAAC,SAAP,CAAhE,yBADJ,CADJ,CADN,CADH,CADH,cAYK,2BAAK,SAAS,CAAC,wBAAf,eAEA,2BAAK,SAAS,CAAC,KAAf,eACA,6CADA,CAFA,cAMG,2BAAK,SAAS,CAAC,KAAf,CAAqB,KAAK,CAAE,CAACH,MAAM,CAAC,MAAR,CAA5B,eACA,2BAAK,SAAS,CAAC,WAAf,eAEoB,4BAAM,IAAI,CAAC,aAAX,CAAyB,EAAE,CAAC,aAA5B,CAA0C,MAAM,CAAC,MAAjD,CAAwD,OAAO,CAAC,qBAAhE,eAExC,2BAAK,SAAS,CAAC,WAAf,eAGA,6BAAO,IAAI,CAAC,QAAZ,CAAqB,EAAE,CAAC,WAAxB,CAAoC,IAAI,CAAC,WAAzC,EAHA,cAIE,2BAAK,SAAS,CAAC,oBAAf,eACE,2BAAK,SAAS,CAAC,UAAf,eACA,2BAAK,SAAS,CAAC,UAAf,eACA,6BAAO,GAAG,CAAC,cAAX,CAA0B,SAAS,CAAC,YAApC,iBADA,CADA,cAKA,2BAAK,SAAS,CAAC,gBAAf,eACM,6BAAO,SAAS,CAAC,4CAAjB,kCACsB,8BADtB,cAEM,6BAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,cAAtB,CAAqC,IAAI,CAAC,cAA1C,CACA,MAAM,CAAC,SADP,CACmB,QAAQ,KAD3B,CAEA,KAAK,CAAE,CAACA,MAAM,CAAC,KAAR,CAAcI,KAAK,CAAC,KAApB,CAA0BC,QAAQ,CAAG,QAArC,CAFP,EAFN,CADN,cAOc,2BAAK,SAAS,CAAC,oBAAf,CAAoC,KAAK,CAAE,CAACH,QAAQ,CAAC,EAAV,CAA3C,EAA2D,KAAKjE,KAAL,CAAWK,MAAX,CAAkBgE,YAA7E,CAPd,cASQ,2BAAK,SAAS,CAAC,cAAf,MATR,CALA,CADF,CAJF,cA+BE,2BAAK,SAAS,CAAC,oBAAf,eACE,2BAAK,SAAS,CAAC,UAAf,eACA,2BAAK,SAAS,CAAC,UAAf,eACA,6BAAO,SAAS,CAAC,qBAAjB,aADA,CADA,cAKA,2BAAK,SAAS,CAAC,UAAf,eACY,6BAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,cAAtB,CAAqC,IAAI,CAAC,cAA1C,CAAyD,SAAS,CAAC,cAAnE,CAAmF,QAAQ,KAA3F,EADZ,cAGc,2BAAK,SAAS,CAAC,oBAAf,CAAoC,KAAK,CAAE,CAACJ,QAAQ,CAAC,EAAV,CAA3C,EAA2D,KAAKjE,KAAL,CAAWK,MAAX,CAAkBiE,YAA7E,CAHd,CALA,CADF,CA/BF,CAFwC,cAqDvC,2BAAK,SAAS,CAAC,gBAAf,eACA,2BAAK,SAAS,CAAC,KAAf,eACC,2BAAK,SAAS,CAAC,eAAf,eACA,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,+BAAhC,CAAiE,OAAO,CAAE,KAAKnD,UAA/E,WADA,CADD,cAKC,2BAAK,SAAS,CAAC,eAAf,SALD,CADA,CArDuC,CAFpB,CADA,CANH,CAZL,CADF,CADJ,CADJ,CADA,CAFF,CA8HE,C,6BA/S4B9C,KAAK,CAACC,S,EAgTnC,CAID,cAAeyB,CAAAA,eAAf","sourcesContent":["import React, {Component} from \"react\"; \r\nimport Button from '../elements/Button'; \r\nimport Image from \"../elements/Image\"; \r\nimport '../Css/styles.css';\r\nimport { Editor } from \"react-draft-wysiwyg\";\r\nimport \"react-draft-wysiwyg/dist/react-draft-wysiwyg.css\";\r\nimport ButtonGroup from \"../elements/ButtonGroup\"; \r\nimport {NavLink,Link} from \"react-router-dom\"; \r\nimport DataService from '../../service/DataService'; \r\nimport UploadService from \"../../service/file-upload.service\";\r\nimport Moment from 'moment';\r\nimport $ from \"jquery\";\r\nconst current = new Date();\r\nconst date = `${current.getFullYear()}-${current.getMonth()+1}-${current.getDate()}`;//mysql insert date format\r\nconst formatDate = Moment(\"12/09/2002\").format('YYYY-MM-DD')//2002-12-09\r\n\r\n\r\n\r\n\r\nconst extractFilename = (path) => {\r\n  const pathArray = path.split(\"/\");\r\n  const lastIndex = pathArray.length - 1;\r\n  return pathArray[lastIndex];\r\n};\r\nclass Campaign_Banner extends React.Component {\r\n    constructor() {\r\n    super();\r\n    this.state = {\r\n      cambanAllDets: [],\r\n      currentcampban: null,\r\n      currentcampbanIndex: -1,\r\n      input: {},\r\n      errors: {},\r\n      ID:null,\r\n      MTUSER_ID:null,\r\n      EMAIL:null,\r\n      MODULE:null, \r\n      CAM_BAN_IMAGE:\"\",\r\n      CAM_BAN_VIDEO:\"\", \r\n      STATUS:\"\",\r\n      COMMENTS:\"\",\r\n      DESCRIPTION:\"\",\r\n      CREATED_USER:\"\",\r\n      CREATED_DATE:\"\",\r\n      MODIFIED_USER:\"\",\r\n      MODIFIED_DATE:\"\", \r\n    };\r\n     \r\n    this.saveCamBan = this.saveCamBan.bind(this);  \r\n    this.retrieveAllCamBan = this.retrieveAllCamBan.bind(this);\r\n    this.setActiveCamBan = this.setActiveCamBan.bind(this);\r\n  }\r\n    \r\n  \r\n  \r\n  componentDidMount() {\r\n    this.retrieveAllCamBan(); \r\n  }\r\n\r\n\r\n  retrieveAllCamBan() {\r\n    var querySet = \"/campban?EMAIL=\" + sessionStorage.getItem(\"sessEmail\");\r\n    console.log(querySet);\r\n    DataService.findByTitle(querySet)\r\n      .then(response => {\r\n        this.setState({\r\n          cambanAllDets: response.data, \r\n        });\r\n\r\n         $.each(this.state.cambanAllDets, function (index, value) {\r\n  \r\n\r\n        $(\"#CampBanform #campbanid\").attr(\"value\", value.ID).val(value.ID);\r\n           $(\"#CampBanform #campbanimage\").closest(\".imgUp\").find('.imagePreview').css(\"background-image\", \"url(\"+window.mt_backend_url+value.CAM_BAN_IMAGE+\")\");\r\n        $(\"#CampBanform #campbanimage\").closest(\"label\").css(\"visibility\",\"hidden\");\r\n          if(value.CAM_BAN_VIDEO.length > 0){ \r\n          $(\"#CampBanform #campbanvideo\").closest(\"div\").html(\"<p>Download file: <a class='text-primary' target='_blank' href=\"+window.mt_backend_url+value.CAM_BAN_VIDEO+\">\"+extractFilename(value.CAM_BAN_VIDEO)+\"</a></p>\");\r\n        }else{\r\n          $(\"#CampBanform #campbanvideo\").closest(\"div\").html('<input type=\"file\" id=\"campbanvideo\" name=\"campbanvideo\" className=\"form-control\"  multiple />');\r\n        }\r\n        \r\n   }); \r\n\r\n      })\r\n      .catch(e => {\r\n        console.log(e);\r\n      });\r\n  }\r\n\r\n\r\n  setActiveCamBan(cambanAllDets, index) {\r\n    this.setState({\r\n      currentcampban: cambanAllDets,\r\n      currentcampbanIndex: index,\r\n      // tfcurrentFile:this.state.tfcurrentFile\r\n    });\r\n  }\r\n\r\n\r\n  saveCamBan(event) {\r\n    event.preventDefault();\r\n    if (this.validateCampBan()) {\r\n      if (!window.isEmpty(sessionStorage.getItem(\"sessEmail\"))) {\r\n           \r\n        let cambanformData = new FormData();  \r\n        cambanformData.append(\"ID\",Number($(\"#CampBanform #campbanid\").val()));\r\n        cambanformData.append(\"MTUSER_ID\",$(\"#mtuser_id\").val());\r\n        cambanformData.append(\"EMAIL\",$(\"#mtuser_email\").val()); \r\n        cambanformData.append(\"MODULE\",$(\"#mtuser_module\").val());\r\n        cambanformData.append(\"STATUS\",\"Active\");\r\n        cambanformData.append(\"COMMENTS\", \"TEST\");\r\n        cambanformData.append(\"DESCRIPTION\", \"TEST\");\r\n        cambanformData.append(\"CREATED_USER\", $(\"#mtuser_fname\").val());\r\n        cambanformData.append(\"CREATED_DATE\", Moment(date).format(\"YYYY-MM-DD\"));\r\n        cambanformData.append(\"MODIFIED_USER\", $(\"#mtuser_fname\").val());\r\n        cambanformData.append(\"MODIFIED_DATE\", Moment(date).format(\"YYYY-MM-DD\"));\r\n         \r\n     \r\n        if (window.isEmpty($(\"#CampBanform #campbanid\").val())) {\r\n          cambanformData.append(\"CAM_BAN_IMAGE\", $(\"#CampBanform #campbanimage\")[0].files[0],$(\"#CampBanform #campbanimage\")[0].files[0].name);\r\n          cambanformData.append(\"CAM_BAN_VIDEO\", $(\"#CampBanform #campbanvideo\")[0].files[0],$(\"#CampBanform #campbanvideo\")[0].files[0].name);\r\n          \r\n        }\r\n\r\n        // console.log(rsformData);\r\n\r\n        if (window.isEmpty($(\"#CampBanform #campbanid\").val())) {\r\n\r\n          UploadService.create(\"/campban\", cambanformData)\r\n            .then(response => {\r\n              console.log(\"inside\");\r\n              window.showLoader();\r\n              window.showAlert(\"The Campaign is submittted\", \"/Campaign_Banner\");\r\n            })\r\n            .catch(e => {\r\n              window.showLoader();\r\n              window.showAlert(\"OOps!!! Something went wrong\", \"/Campaign_Banner\");\r\n            });\r\n\r\n        } else {\r\n\r\n\r\n          UploadService.update(\"/campban/\" + Number($(\"#CampBanform #campbanid\").val()), cambanformData)\r\n            .then(response => {\r\n              window.showLoader();\r\n              window.showAlert(\"The Campaign is submittted\", \"/Campaign_Banner\");\r\n            })\r\n            .catch(e => {\r\n              window.showLoader();\r\n              window.showAlert(\"OOps!!! Something went wrong\", \"/Campaign_Banner\");\r\n            });\r\n\r\n        }\r\n\r\n\r\n        // });\r\n\r\n\r\n\r\n      } else {\r\n        window.showAlert(\"Please Login\", \"/Login\");\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n\r\n\r\n  validateCampBan(){\r\n    console.log(\"inside validateCampBan validations\")\r\n    let input = this.state.input;\r\n    let errors = {};\r\n    let isValid = true;\r\n  \r\n    if (window.isEmpty($(\"#CampBanform #campbanid\").val())) {\r\n    if (!$(\"#CampBanform #campbanimage\").get(0).files.length  > 0) {\r\n      isValid = false;\r\n      errors[\"campbanimage\"] = \"Please Upload Image\";\r\n      $(\"#CampBanform #campbanimage\").focus();\r\n    }\r\n  \r\n    if (!$(\"#CampBanform #campbanvideo\").get(0).files.length  > 0) {\r\n      isValid = false;\r\n      errors[\"campbanvideo\"] = \"Please Upload Video\";\r\n      $(\"#CampBanform #campbanvideo\").focus();\r\n    }\r\n  }\r\n  \r\n \r\n\r\n    this.setState({\r\n      errors: errors\r\n    });\r\n\r\n    return isValid;\r\n  }\r\n     \r\n render() {\r\n    \r\n \r\n\r\nreturn (\r\n\r\n  <body className='' >\r\n  <div className='container'>  \r\n      <div className='row' style={{height:'auto',marginTop:100}}>\r\n          <div className='row'>\r\n            <div className=\"hero-content\">\r\n               <nav className=\"navbar navbar-expand-sm bg-Secondary navbar-white \" >\r\n                  <div className=\"container-fluid\"  >\r\n                        <ul className=\"navbar-nav\" style={{fontSize:13}}> \r\n                            <li className=\"nav-item\">\r\n                                <NavLink to=\"/Campaign\" className=\"nav-link arrow-right\" style={{color:\"#B1B0AD\"}}>&nbsp;Back to Campaign</NavLink>\r\n                              </li>\r\n                        \r\n                          </ul>\r\n                    </div>\r\n                  </nav>\r\n\r\n                 <div className='container bg-white p-5'> \r\n                 \r\n                 <div className='row'> \r\n                 <h3>Banner Video</h3> \r\n                 </div> \r\n                  \r\n                    <div className='row' style={{height:'auto'}}>\r\n                    <div className='col-md-12'> \r\n \r\n                                        <form name=\"CampBanform\" id=\"CampBanform\" method=\"POST\" enctype=\"multipart/form-data\"  >  \r\n\r\n<div className=\"col-md-12\"  > \r\n   \r\n\r\n<input type=\"hidden\" id=\"campbanid\" name=\"campbanid\"/>\r\n  <div className=\"col-md-8 mb-3 mt-3\">\r\n    <div className=\"row mb-3\">\r\n    <div className=\"col-md-8\">\r\n    <label for=\"campbanimage\" className=\"form-label\">Banner Photo</label>\r\n    </div>\r\n\r\n    <div className=\"col-md-4 imgUp\">    \r\n          <label className=\"col-md-12 btn btn-outline-secondary btn-sm\">\r\n                Upload a picture<br/>\r\n                <input type=\"file\" id=\"campbanimage\" name=\"campbanimage\" \r\n                accept=\"image/*\"   multiple \r\n                style={{height:\"0px\",width:\"0px\",overflow : \"hidden\"}}/>\r\n                  </label>\r\n                  <div className=\"text-danger errors\" style={{fontSize:15}}>{this.state.errors.campbanimage}</div>\r\n            \r\n            <div className=\"imagePreview\"> </div>\r\n            \r\n            \r\n            </div>  \r\n             \r\n\r\n    </div>\r\n   \r\n  </div>\r\n\r\n\r\n\r\n  <div className=\"col-md-8 mb-3 mt-3\">\r\n    <div className=\"row mb-3\">\r\n    <div className=\"col-md-8\">\r\n    <label className=\"col-sm-2 form-label\">Video(s)</label>\r\n    </div>\r\n\r\n    <div className=\"col-md-4\">      \r\n                <input type=\"file\" id=\"campbanvideo\" name=\"campbanvideo\" className=\"form-control\"  multiple \r\n                /> \r\n                  <div className=\"text-danger errors\" style={{fontSize:15}}>{this.state.errors.campbanvideo}</div>\r\n              \r\n             \r\n            </div>   \r\n\r\n    </div>\r\n \r\n\r\n  </div>\r\n     \r\n </div>\r\n <div className=\"col-md-12 mt-5\">\r\n <div className=\"row\">\r\n  <div className=\"col-md-3 mb-3\">\r\n  <button type=\"button\" className=\"btn btn-success btn-sm  w-100\"  onClick={this.saveCamBan}>Submit</button>\r\n\r\n  </div>\r\n  <div className=\"col-md-3 mb-3\"> \r\n  &nbsp;\r\n  </div>\r\n\r\n\r\n\r\n\r\n</div>\r\n </div>\r\n\r\n\r\n</form>\r\n\r\n\r\n\r\n\r\n                                        </div>\r\n\r\n                    </div></div>\r\n    \r\n                    </div>\r\n                    \r\n                    </div>\r\n                    \r\n                    \r\n                    </div></div> \r\n \r\n\r\n    </body>          \r\n              \r\n              \r\n\r\n              \r\n\r\n\r\n              \r\n               \r\n               \r\n\r\n) ;       \r\n }\r\n};\r\n\r\n\r\n\r\nexport default Campaign_Banner;"]},"metadata":{},"sourceType":"module"}